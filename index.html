<!DOCTYPE html>
<html>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=0.8, maximum-scale=0.8, user-scalable=no" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

<head>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" />
	<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/css/ion.rangeSlider.min.css" />
	<link rel="stylesheet" href="https://unpkg.com/ion-rangeslider@2.2.0/css/ion.rangeSlider.skinNice.css" />
	<link rel="stylesheet" href="css/leaflet.css" />
	<link rel="stylesheet" href="css/leaflet-panel-layers.css" />
	<link rel="stylesheet" href="css/leaflet-panel-layers.min.css" />
	<link rel="stylesheet" href="css/leaflet-panel-layers.src.css" />
	<link rel="stylesheet" href="css/L.Control.HtmlLegend.css" />
	<link rel="stylesheet" href="css/leaflet-search.css" />
	<link rel="stylesheet" href="https://code.ionicframework.com/ionicons/1.5.2/css/ionicons.min.css">
	<!-- <link rel="stylesheet" href="https://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css" /> -->
	<link rel="stylesheet" href="css/leaflet.awesome-markers.css" />

	<!-- rangeSlider - stefano cudinii -->


	<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
		integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
		crossorigin=""></script>

		<!--jQuery-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<!--Plugin JavaScript file-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/js/ion.rangeSlider.min.js"></script>



	<!-- complemento awesomeMarker-->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
		integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
	<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
		integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>



	<!-- <script src="https://cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script> -->
	<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>

	<script src="js/leaflet-panel-layers.src.js"></script>
	<script src="js/leaflet-panel-layers.js"></script>
	<script src="js/L.Control.Appearance.js"></script>
	<script src="js/jquery-3.5.1.js"></script>
	<script src="js/L.Control.HtmlLegend.js"></script>
	<script src="js/leaflet-search.js"></script>
	<script src="js/leaflet.awesome-markers.js"></script>
	<script src="js/leaflet.awesome-markers.min.js"></script>


	<!-- plugin wms-->
	<script src="js/leaflet.wms.js"></script>


	<!-- en la Carpeta DATA estan los js como capas-->

	<script type="text/javascript" src="data/provincia.js"></script>
	<script type="text/javascript" src="data/loc_cabecera.js"></script>
	<script type="text/javascript" src="data/loc_secundarias.js"></script>
	<script type="text/javascript" src="data/rutas.js"></script>
	<script type="text/javascript" src="data/catastros.js"></script>
	<script type="text/javascript" src="data/dpto.js"></script>
	<script type="text/javascript" src="data/mesasdelagua.js"></script>
	<script type="text/javascript" src="data/escuelas.js"></script>
	<script type="text/javascript" src="data/puestosdata.js"></script>
	<script type="text/javascript" src="data/info_RelevSolidaridad.js"></script>
	<script type="text/javascript" src="data/geologico.js"></script>
	<script type="text/javascript" src="data/subcuencas.js"></script>
	<script type="text/javascript" src="data/rios.js"></script>
	<script type="text/javascript" src="js/wmsconae.js"></script>
	
	<script type="text/javascript" src="js/mapa.js"></script>
	<style>
		#map {
			width: 100%;
			height: 600px;
			box-shadow: 5px 5px 5px #888;
		}

		.info {
			padding: 6px 8px;
			font: 14px/16px Arial, Helvetica, sans-serif;
			background: white;
			background: rgba(255, 255, 255, 0.8);
			box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
			border-radius: 5px;
		}

		.info h2 {
			margin: 0 0 5px;
			color: #777;
		}

		.leaflet-tooltip.my-labels {
			background-color: transparent;
			border: transparent;
			box-shadow: none;
		}

		/* Estilos CSS para la leyenda */
		.info.legend {
			background: white;
			padding: 10px;
			border: 1px solid #ccc;
			border-radius: 5px;
			font-size: 12px;
		}

		/* Estilos para los círculos de colores en la leyenda */
		.info.legend i {
			width: 12px;
			height: 12px;
			display: inline-block;
			border-radius: 50%;
			margin-right: 5px;
		}

		/* remove label background elements */
		.leaflet-tooltip.my-labels {
			background-color: transparent;
			border: transparent;
			box-shadow: none;
			font-weight: bold;
			font-size: 30px;
		}


	</style>

</head>

<body>


	<div id="map"></div>

	<script>

		// Grupos de capas
		var baseLayers = [
			{
				name: "ArgenMap",
				layer: argenmap,
			},
			{
				name: "Open Street Map",
				layer: osm,
			},
			{
				name: "Google Satelite",
				layer: google
			}];

		var overlayMaps = [
			{
				group: "Municipios",
				collapsed: true,
				layers: [

					{
						active: false,
						name: "Departamento",
						layer: DEPTO,
						transparent: true,
						opacity: 0.5,
					},
					{
						active: false,
						name: "Santa Victoria",
						layer: StaVictoria,
						transparent: true,
						opacity: 0.5,
					},
					{
						active: false,
						name: "Rivadavia Banda Norte",
						layer: RBN,
						transparent: true,
						opacity: 0.5,
					}, {
						active: false,
						name: "Rivadavia Banda Sur",
						layer: RBS,
						transparent: true,
						opacity: 0.5,
					}
				]
			},
			{
				group: "Catastros",
				collapsed: true,
				layers: [


					{
						active: false,
						name: "Catastros",
						layer: catastrosL,
						transparent: true,
						opacity: 0.5,
					},
				]
			},
			{
				group: "Información Base",
				collapsed: true,
				layers: [
				{
						active: false,
						name: "Rios",
						layer: Rios,
						transparent: true,
						opacity: 0.5,
					},
					{
						active: false,
						name: "Cuencas Hídricas",
						layer: SubCuencas,
						transparent: true,
						opacity: 0.5,
					},
					
					{
						active: false,
						name: "Unidades Geológicas (2.5M)",
						layer: Geologia,
						transparent: true,
						opacity: 0.5,
					},
				]
			},

			{
				group: "Info Censal (2010)",
				collapsed: true,
				layers: [

					, {
						active: false,
						name: "Localidades Censales",
						layer: Localidad,
						transparent: true,
						opacity: 0.5,
					},
					{
						active: false,
						name: "Parajes",
						layer: Parajes,
						transparent: true,
						opacity: 0.5,
					}]
			},
			{
				group: "Escuelas",
				collapsed: true,
				layers: [
					{
						active: false,
						name: "Escuelas",
						layer: ESC,
						transparent: true,
						opacity: 0.5,
					},
				]
			},
			{
				group: "Acceso al Agua",
				collapsed: true,
				layers: [
					{
						active: false,
						name: "Data - Mesas del agua",
						layer: MESAS,
						transparent: true,
						opacity: 0.5,
					},
					{
						active: false,
						name: "Acceso al agua por<br> Puesto o Comunidad",
						layer: PUESTOS,
						transparent: true,
						opacity: 0.5,
					},
					{
						active: false,
						name: "Data - Relevamiento Solidaridad",
						layer: RELVSOLIDARIDAD,
						transparent: true,
						opacity: 0.5,
					},

				]
			},

		];

		var panelTransparecia = [{
			group: "Estatus Hídrico",
			collapsed: true,
			layers: [
			{
						active: false,
						name: "Indice de Precipitación Diario (API)",
						layer: APIDiario,
						transparent: true,
						opacity: 0.5,
					},
					{
						active: false,
						name: "Percentil de API",
						layer: APIPercentil,
						transparent: true,
						opacity: 0.5,
					}
						]
					}

			]
		;





		//mapa//
		var map = L.map('map', {
			center: [-23.52030, -62.82378],
			zoom: 8,
			zoomControl: false,
			layers: [argenmap, DEPTO, Rutas, Localidad]

		});

		// colocar el logo
		L.Control.Watermark = L.Control.extend({
			onAdd: function (map) {
				var img = L.DomUtil.create('img');
				img.src = 'images/logo_inenco.png';
				img.style.width = '20vh', // vh para que sea responsive
					img.style.height = 'auto'; // auto para que sera responsive
				return img;
			},
			onRemove: function (map) { },
		});
		L.control.watermark = function (opts) {
			return new L.Control.Watermark(opts);
		}
		L.control.watermark(position = 'topleft').addTo(map);

		var panelLayers = new L.Control.PanelLayers(baseLayers, null,
			{
				compact: true,
				collapsed: false,
				collapsibleGroups: true,
				position: 'topleft',
			});
		map.addControl(panelLayers);
		//panel de control agregado//
		var panelLayers1 = new L.Control.PanelLayers(null, overlayMaps,
			{
				compact: true,
				//collapsed: true,
				collapsibleGroups: true,
				position: 'topleft',
			});
		map.addControl(panelLayers1);

		var panelLayers2 = new L.Control.PanelLayers(null, panelTransparecia,
			{compact: true,
				collapsed: false,
				collapsibleGroups: true,
				position: 'topleft',

			});
		map.addControl(panelLayers2);

		// Insertando buscador
		var title = L.control();
		title.onAdd = function (map) {
			var div = L.DomUtil.create('div', 'info');
			div.innerHTML +=
				'<h2>Buscador <br>de parajes</h2> ';
			return div;
		};
		title.addTo(map);

		// //buscador de datos. Solo para datos que sean json o geojson
		var searchControl = new L.Control.Search({
			layer: Parajes,
			propertyName: 'NOMBRE',
			circleLocation: false,
			position: 'topright',
			collapsed: true
		});
		map.addControl(searchControl);

		// searchControl.on('search:locationfound', function (e) {
		// 	var tipoAbastecimiento = e.text; // Tipo de abastecimiento buscado

		// 	// Restaurar el estilo de todas las capas
		// 	PUESTOS.eachLayer(function (layer) {
		// 		PUESTOS.resetStyle(layer);
		// 	});

		// 	// Iterar sobre todas las capas y resaltar las que coinciden con el tipo de abastecimiento buscado
		// 	PUESTOS.eachLayer(function (layer) {
		// 		if (layer.feature.properties.TIPO_ABAST === tipoAbastecimiento) {
		// 			layer.setStyle({ fillColor: '#3f0', color: '#6bbdc9' });
		// 		}
		// 	});
		// }).on('search:collapsed', function (e) {
		// 	// Restaurar el estilo de todas las capas al cerrar la búsqueda
		// 	PUESTOS.eachLayer(function (layer) {
		// 		PUESTOS.resetStyle(layer);
		// 	});
		// });
		map.removeLayer(Parajes)

    
// Llamada a la función para crear la leyenda
createLegend();
createLegendGeologia();
createLegendCuenca();
createLegendRio();
createLegendApiDiario();
createLegendApiPercentil();


		//se le agregan los controles//
		L.control.zoom({ position: 'topright' }).addTo(map);
		L.control.scale({ position: 'bottomleft', imperial: false }).addTo(map);
	</script>


</body>

</html>